#include   <reg52.h>
#define   uint   unsigned   int
#define   uchar   unsigned   char

//**********????**********//
void   main(void);   //???
void   Ini_UART(void);   //?????
void   Delay(void);   //??
void   CMGF(void);   //???????TXET??
void   CMGS(void);   //????????
void   SEND(void);   //?????


/***********************************************************
????:main
????:???                                 ????:?         ????:?
***********************************************************/
void   main(void)
{
        Ini_UART();   //?????

        CMGF();     //???????TXET??
        Delay();
		

        CMGS();     //????????
        Delay();

        SEND();
        Delay();
}


/***********************************************************
????:Ini_UART
????:???????                 ????:?         ????:?
***********************************************************/
void   Ini_UART(void)
{    

        SCON   =   0x50;   //UART??1:8?UART;   REN=1:????
        PCON   =   0x00;   //SMOD=0:??????

        TMOD   =   0x20;   //T1??2,??UART???

        TH1     =   0xFD;
        TL1     =   0xFD;   //UART?????:9600
        TR1     =   1;
}


/***********************************************************
????:Delay1ms
????:??                                   ????:?           ????:?
***********************************************************/
void   Delay(void)
{      
        uint   i,j;

        for   (i=0;   i <10;   i++)
        {
            for(j=0;   j <1000;   j++);
        }
}


/***********************************************************
????:CMGF
????:???????TXET??       ????:?     ????:?
***********************************************************/
void   CMGF(void)
{
    uchar   i   =   0;
    uchar   code   mode[]= "AT+CMGF=1\r ";     //   \r?   <CR>   ??

    while(   mode[i]!='\0')
        {
            SBUF=mode[i];
          while(TI==0) ;   
           TI=0;  
            i++;
			
        }
}


/***********************************************************
????:CMGS
????:????SIM???                 ????:?     ????:?
***********************************************************/
void   CMGS(void)
{
    uchar   i   =   0;
    uchar   code   phone[]= "AT+CMGS=13632438226\r ";    //   \ "?"

    while(   phone[i]!='\0')
        {
            SBUF=phone[i];  
           while(TI==0) ;   
           TI=0;  
            i++;
			
        }        
}


/***********************************************************
????:SEND
????:?GPS????SBUF                 ????:?     ????:?
***********************************************************/
void   SEND(void)
{
    uchar   i   =   0;
    uchar   code   sms[]   =   "break\x01a ";//sms??????????,\x01a?Ctrl+Z

    while(   sms[i]!='\0')
        {
            SBUF   =   sms[i];
            while(TI==0) ;   
           TI=0;  
            i++;
 		    
        }
}

